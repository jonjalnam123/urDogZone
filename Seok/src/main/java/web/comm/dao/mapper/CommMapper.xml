<?xml version="1.0" encoding="UTF-8"?>

<!-- 마이바티스 3 Mapper DTD -->
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="web.comm.dao.face.CommDao">

	<select id="getEmailCd" parameterType="String" resultType="CommDTO">
		/* CommDao.getEmailCd */
		SELECT COMM_CD
				, COMM_UPPER_CD
				, COMM_NM
				, COMM_DEL_YN
				, REG_ID
				, REG_DT
				, UPD_ID
				, UPD_DT
		  FROM TB_COMM_CD
		 WHERE COMM_DEL_YN = 'N'
		    AND COMM_UPPER_CD = #{code}
	</select>
	
	<select id="getMainCity" resultType="CommCityDTO">
		/* CommDao.getMainCity */
		SELECT CITY_CODE
				, CITY_NAME
		  FROM TB_KOREA_CITY_INFO
		 WHERE CITY_DEL_YN = 'N'
		    AND CITY_PARENT_CODE IS NULL  
	</select>
	
    <select id ="selectCntall" parameterType="String" resultType="int">
    	/* CommDao.selectCntall */
    	SELECT COUNT(*) FROM ${tbNm}
    </select>
    
	<select id ="selectCntSearchAll" resultType="int" parameterType="SearchDTO">
		/* VolunteerDao.selectCntSearchAll */
		SELECT COUNT(*) 
	  	  FROM ${tbNm}
		<if test="col != null and col != ''">
			WHERE ${col} LIKE CONCAT('%', #{param}, '%')
		</if>
	  	 <if test="col1 != null and col1 != ''">
	  	 	AND ${col1} LIKE CONCAT('%', #{param1}, '%')
	  	 </if> 
	</select>

</mapper>